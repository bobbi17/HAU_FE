<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý Người dùng - HauHub Admin</title>
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="../../css/reset.css">
    <link rel="stylesheet" href="../../css/variables.css">
    <link rel="stylesheet" href="../../css/components.css">
    <link rel="stylesheet" href="../../css/layout.css">
    <link rel="stylesheet" href="../../css/pages/admin.css">
    
    <!-- External Libraries -->
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700;900&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet">
</head>
<body class="admin-dashboard">
    <div class="dashboard-container">
        <!-- Sidebar Navigation -->
      <!-- Sidebar Navigation -->
<aside class="dashboard-sidebar" id="admin-sidebar">
    <div class="sidebar-header">
        <div class="brand-logo">
            <span class="material-symbols-outlined logo-icon">architecture</span>
        </div>
        <div class="brand-info">
            <h1 class="brand-name">HauHub</h1>
            <p class="brand-subtitle">Admin Portal</p>
        </div>
    </div>
    
    <nav class="sidebar-nav">
        <ul class="nav-menu">
            <li class="nav-item">
                <a href="admin-dashboard.html" class="nav-link">
                    <span class="nav-icon material-symbols-outlined">dashboard</span>
                    <span class="nav-text">Dashboard</span>
                </a>
            </li>
            <li class="nav-item active">
                <a href="user-management.html" class="nav-link">
                    <span class="nav-icon material-symbols-outlined">group</span>
                    <span class="nav-text">Người dùng</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="department-management.html" class="nav-link">
                    <span class="nav-icon material-symbols-outlined">school</span>
                    <span class="nav-text">Đào tạo</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="forum-management.html" class="nav-link">
                    <span class="nav-icon material-symbols-outlined">forum</span>
                    <span class="nav-text">Diễn đàn</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="../ai/ai-documents.html" class="nav-link">
                    <span class="nav-icon material-symbols-outlined">smart_toy</span>
                    <span class="nav-text">Tài liệu AI</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="system-config.html" class="nav-link">
                    <span class="nav-icon material-symbols-outlined">settings</span>
                    <span class="nav-text">Cấu hình</span>
                </a>
            </li>
        </ul>
    </nav>
    
    <div class="sidebar-footer">
        <div class="user-profile">
            <div class="user-avatar">
                <img src="https://lh3.googleusercontent.com/aida-public/AB6AXuCtmkkJF4tN3dFTJCHA7Bxu1Ic0IRrDB4IBR7WvPZFBZK7zQ3IDRtglLgn95BjUJg2zxPJ4SXgKfgbM4VBr5s42AjUu9BIaedrCoskkTd94vc8PNqx1rc-KKUFFLqXbMVdSX6oYBCoLopANZGPZ0xzszKO6FvhbuvNmq7SGuSmtMAM-vHbuivZVNBb24mXMN7DWtHg4RIf4ExvqFdGjPhm5u7vDy-64-3Y7un7j9s5jeW5oqkl4-zZ6TIucjA8c61W6_K-v10TwUeg" alt="Admin Avatar">
            </div>
            <div class="user-info">
                <p class="user-name">Admin HauHub</p>
                <p class="user-role">System Overseer</p>
            </div>
            <button class="logout-btn" id="logout-button">
                <span class="material-symbols-outlined">logout</span>
            </button>
        </div>
    </div>
</aside>
        
        <!-- Main Content -->
        <main class="dashboard-main">
            <!-- Top Navigation -->
            <header class="dashboard-header">
                <div class="header-left">
                    <div class="compass-icon">
                        <svg class="compass-svg" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                            <circle class="technical-line" cx="24" cy="24" r="18" stroke="currentColor" stroke-width="1.5"></circle>
                            <path d="M24 8V12M24 36V40M8 24H12M36 24H40" stroke="currentColor" stroke-linecap="round" stroke-width="1.5"></path>
                            <path d="M24 16L20 24L24 32L28 24L24 16Z" fill="currentColor" fill-opacity="0.2" stroke="currentColor" stroke-width="1.5"></path>
                            <circle cx="24" cy="24" fill="currentColor" r="2"></circle>
                        </svg>
                    </div>
                    <div class="header-title">
                        <h2>Quản lý Người dùng</h2>
                        <p>HauHub User Identity Management</p>
                    </div>
                </div>
                
                <div class="header-right">
                    <div class="search-bar">
                        <span class="material-symbols-outlined search-icon">search</span>
                        <input type="text" placeholder="Tìm mã số, tên..." 
                               class="search-input" id="user-search">
                    </div>
                    
                    <div class="header-actions">
                        <button class="action-btn notification-btn" id="notifications-btn">
                            <span class="material-symbols-outlined">notifications</span>
                            <span class="notification-badge" id="notification-count">3</span>
                        </button>
                    </div>
                </div>
            </header>
            
            <!-- Dashboard Content -->
            <div class="dashboard-content">
                <!-- Breadcrumbs -->
                <nav class="breadcrumbs">
                    <a href="admin-dashboard.html" class="breadcrumb-link">Quản trị viên</a>
                    <span class="breadcrumb-separator">/</span>
                    <span class="breadcrumb-current">Dữ liệu người dùng</span>
                </nav>
                
                <!-- Page Header -->
                <div class="page-header">
                    <div class="header-content">
                        <h1 class="page-title">Quản Lý Người Dùng</h1>
                        <p class="page-subtitle">
                            Hệ thống quản lý định danh tập trung. Đảm bảo tính chính xác và bảo mật thông tin học thuật theo tiêu chuẩn kiến trúc hiện đại.
                        </p>
                    </div>
                    <div class="header-actions">
                        <button class="btn-secondary" id="export-data-btn">
                            <span class="material-symbols-outlined">file_download</span>
                            Xuất dữ liệu
                        </button>
                        <button class="btn-primary" id="add-user-btn">
                            <span class="material-symbols-outlined">person_add</span>
                            Thêm tài khoản
                        </button>
                    </div>
                </div>
                
                <!-- Stats Overview -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-header">
                            <div>
                                <p class="stat-label">Tổng người dùng</p>
                                <h3 class="stat-value" id="total-users">12,540</h3>
                            </div>
                            <span class="stat-icon">
                                <span class="material-symbols-outlined">group</span>
                            </span>
                        </div>
                        <div class="stat-trend success">+12%</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-header">
                            <div>
                                <p class="stat-label">Đang hoạt động</p>
                                <h3 class="stat-value" id="active-users">8,210</h3>
                            </div>
                            <span class="stat-icon">
                                <span class="material-symbols-outlined">bolt</span>
                            </span>
                        </div>
                        <div class="stat-trend success">+5%</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-header">
                            <div>
                                <p class="stat-label">Chờ phê duyệt</p>
                                <h3 class="stat-value" id="pending-users">45</h3>
                            </div>
                            <span class="stat-icon">
                                <span class="material-symbols-outlined">hourglass_top</span>
                            </span>
                        </div>
                        <div class="stat-trend warning">-2%</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-header">
                            <div>
                                <p class="stat-label">Tài khoản khóa</p>
                                <h3 class="stat-value" id="locked-users">128</h3>
                            </div>
                            <span class="stat-icon">
                                <span class="material-symbols-outlined">block</span>
                            </span>
                        </div>
                        <div class="stat-trend stable">Ổn định</div>
                    </div>
                </div>
                
                <!-- User Management Table -->
                <div class="content-card">
                    <div class="card-header">
                        <h3 class="card-title">Danh sách Người dùng</h3>
                        <div class="card-filters">
                            <div class="filter-group">
                                <label class="filter-label">Phân loại</label>
                                <select class="filter-select" id="user-type-filter">
                                    <option value="all">Tất cả đối tượng</option>
                                    <option value="student">Sinh viên</option>
                                    <option value="teacher">Giảng viên</option>
                                    <option value="admin">Quản trị</option>
                                </select>
                            </div>
                            
                            <div class="filter-group">
                                <label class="filter-label">Trạng thái</label>
                                <select class="filter-select" id="user-status-filter">
                                    <option value="all">Tất cả trạng thái</option>
                                    <option value="active">Hoạt động</option>
                                    <option value="locked">Bị khóa</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Mã định danh</th>
                                    <th>Thông tin nhân sự</th>
                                    <th>Phân quyền</th>
                                    <th>Trạng thái</th>
                                    <th class="text-center">Ngày khởi tạo</th>
                                    <th class="text-right">Hành động</th>
                                </tr>
                            </thead>
                            <tbody id="users-table-body">
                                <!-- Users will be loaded here -->
                                <tr class="user-item">
                                    <td>
                                        <span class="user-code">HAU.2024.001</span>
                                    </td>
                                    <td>
                                        <div class="user-info">
                                            <div class="user-avatar">NT</div>
                                            <div class="user-details">
                                                <div class="user-name">Nguyễn Thành Trung</div>
                                                <div class="user-email">trung.nt@hau.edu.vn</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="role-badge student">Sinh viên</span>
                                    </td>
                                    <td>
                                        <div class="status-indicator active">
                                            <span class="status-dot"></span>
                                            <span class="status-text">Hoạt động</span>
                                        </div>
                                    </td>
                                    <td class="text-center">
                                        <span class="date-text">12/03/2024</span>
                                    </td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="action-btn view" data-user-id="1">
                                                <span class="material-symbols-outlined">visibility</span>
                                            </button>
                                            <button class="action-btn permissions" data-user-id="1">
                                                <span class="material-symbols-outlined">admin_panel_settings</span>
                                            </button>
                                            <button class="action-btn lock" data-user-id="1">
                                                <span class="material-symbols-outlined">lock</span>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                
                                <tr class="user-item">
                                    <td>
                                        <span class="user-code">HAU.2024.002</span>
                                    </td>
                                    <td>
                                        <div class="user-info">
                                            <div class="user-avatar">LA</div>
                                            <div class="user-details">
                                                <div class="user-name">Lê Anh Tuấn</div>
                                                <div class="user-email">tuan.la@hau.edu.vn</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="role-badge teacher">Giảng viên</span>
                                    </td>
                                    <td>
                                        <div class="status-indicator active">
                                            <span class="status-dot"></span>
                                            <span class="status-text">Hoạt động</span>
                                        </div>
                                    </td>
                                    <td class="text-center">
                                        <span class="date-text">10/03/2024</span>
                                    </td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="action-btn view" data-user-id="2">
                                                <span class="material-symbols-outlined">visibility</span>
                                            </button>
                                            <button class="action-btn permissions" data-user-id="2">
                                                <span class="material-symbols-outlined">admin_panel_settings</span>
                                            </button>
                                            <button class="action-btn lock" data-user-id="2">
                                                <span class="material-symbols-outlined">lock</span>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                
                                <tr class="user-item locked">
                                    <td>
                                        <span class="user-code">HAU.2024.045</span>
                                    </td>
                                    <td>
                                        <div class="user-info">
                                            <div class="user-avatar">MH</div>
                                            <div class="user-details">
                                                <div class="user-name">Mai Hoa</div>
                                                <div class="user-email">hoa.m@hau.edu.vn</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="role-badge student">Sinh viên</span>
                                    </td>
                                    <td>
                                        <div class="status-indicator locked">
                                            <span class="status-dot"></span>
                                            <span class="status-text">Bị khóa</span>
                                        </div>
                                    </td>
                                    <td class="text-center">
                                        <span class="date-text">01/03/2024</span>
                                    </td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="action-btn view" data-user-id="3">
                                                <span class="material-symbols-outlined">visibility</span>
                                            </button>
                                            <button class="action-btn permissions" data-user-id="3">
                                                <span class="material-symbols-outlined">admin_panel_settings</span>
                                            </button>
                                            <button class="action-btn unlock" data-user-id="3">
                                                <span class="material-symbols-outlined">lock_open</span>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                
                                <tr class="user-item">
                                    <td>
                                        <span class="user-code">HAU.2024.089</span>
                                    </td>
                                    <td>
                                        <div class="user-info">
                                            <div class="user-avatar">VT</div>
                                            <div class="user-details">
                                                <div class="user-name">Vũ Tiến</div>
                                                <div class="user-email">tien.v@hau.edu.vn</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="role-badge admin">Quản trị</span>
                                    </td>
                                    <td>
                                        <div class="status-indicator active">
                                            <span class="status-dot"></span>
                                            <span class="status-text">Hoạt động</span>
                                        </div>
                                    </td>
                                    <td class="text-center">
                                        <span class="date-text">28/02/2024</span>
                                    </td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="action-btn view" data-user-id="4">
                                                <span class="material-symbols-outlined">visibility</span>
                                            </button>
                                            <button class="action-btn permissions" data-user-id="4">
                                                <span class="material-symbols-outlined">admin_panel_settings</span>
                                            </button>
                                            <button class="action-btn lock" data-user-id="4">
                                                <span class="material-symbols-outlined">lock</span>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="table-footer">
                        <div class="pagination-info">
                            Kết quả: <span class="highlight">01 - 10</span> / 12,540
                        </div>
                        <div class="table-controls">
                            <div class="rows-per-page">
                                <label>Hàng mỗi trang:</label>
                                <select class="rows-select" id="rows-per-page">
                                    <option>10</option>
                                    <option>25</option>
                                    <option>50</option>
                                </select>
                            </div>
                            <div class="pagination">
                                <button class="pagination-btn prev" disabled>
                                    <span class="material-symbols-outlined">chevron_left</span>
                                </button>
                                <button class="pagination-page active">1</button>
                                <button class="pagination-page">2</button>
                                <button class="pagination-page">3</button>
                                <span class="pagination-ellipsis">...</span>
                                <button class="pagination-page">120</button>
                                <button class="pagination-btn next">
                                    <span class="material-symbols-outlined">chevron_right</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Bottom Content Grid -->
                <div class="content-grid">
                    <!-- Role Structure -->
                    <div class="content-card">
                        <div class="card-header">
                            <h3 class="card-title">Cấu trúc phân quyền học thuật</h3>
                        </div>
                        <div class="card-body">
                            <p class="card-description">
                                Hệ thống phân tầng dựa trên kiến trúc quản lý tập trung, đảm bảo tính minh bạch và bảo mật dữ liệu giữa các khoa chuyên môn.
                            </p>
                            <div class="role-stats">
                                <div class="role-stat-item">
                                    <span class="role-icon">
                                        <span class="material-symbols-outlined">school</span>
                                    </span>
                                    <div class="role-info">
                                        <div class="role-count" id="student-count">10,240</div>
                                        <div class="role-label">Sinh viên</div>
                                    </div>
                                </div>
                                
                                <div class="role-stat-item">
                                    <span class="role-icon">
                                        <span class="material-symbols-outlined">work</span>
                                    </span>
                                    <div class="role-info">
                                        <div class="role-count" id="teacher-count">2,150</div>
                                        <div class="role-label">Giảng viên</div>
                                    </div>
                                </div>
                                
                                <div class="role-stat-item">
                                    <span class="role-icon">
                                        <span class="material-symbols-outlined">admin_panel_settings</span>
                                    </span>
                                    <div class="role-info">
                                        <div class="role-count" id="admin-count">150</div>
                                        <div class="role-label">Quản trị viên</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pending Approvals -->
                    <div class="content-card urgent">
                        <div class="card-header">
                            <h3 class="card-title">
                                <span class="material-symbols-outlined">notifications_active</span>
                                Hàng đợi phê duyệt
                            </h3>
                        </div>
                        <div class="card-body">
                            <p class="card-description">
                                Hiện có <span class="highlight">45 yêu cầu</span> cấp quyền tài khoản mới đang chờ xử lý.
                            </p>
                            <button class="btn-primary full-width" id="review-pending-btn">
                                Kiểm duyệt ngay
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Footer -->
                <footer class="dashboard-footer">
                    <div class="footer-left">
                        <span>© 2024 HauHub University System • Modern Vietnamese Architecture Focus</span>
                    </div>
                    <div class="footer-right">
                        <a href="#" class="footer-link">Hỗ trợ kỹ thuật</a>
                        <a href="#" class="footer-link">Chính sách bảo mật</a>
                        <a href="#" class="footer-link">Điều khoản</a>
                    </div>
                </footer>
            </div>
        </main>
    </div>

    <!-- Add User Modal -->
    <div class="modal" id="add-user-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Thêm Người dùng Mới</h3>
                <button class="modal-close" id="close-modal">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <form id="user-form" class="modal-form">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Loại tài khoản *</label>
                        <select class="form-select" id="user-type" required>
                            <option value="">Chọn loại tài khoản</option>
                            <option value="student">Sinh viên</option>
                            <option value="teacher">Giảng viên</option>
                            <option value="admin">Quản trị viên</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Khoa/Phòng *</label>
                        <select class="form-select" id="user-department" required>
                            <option value="">Chọn khoa/phòng</option>
                            <option value="architecture">Kiến trúc</option>
                            <option value="planning">Quy hoạch</option>
                            <option value="construction">Xây dựng</option>
                            <option value="interior">Nội thất</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Họ và tên *</label>
                        <input type="text" class="form-input" id="user-name" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Mã số *</label>
                        <input type="text" class="form-input" id="user-code" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Email *</label>
                        <input type="email" class="form-input" id="user-email" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Số điện thoại</label>
                        <input type="tel" class="form-input" id="user-phone">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Mật khẩu mặc định</label>
                        <div class="password-field">
                            <input type="text" class="form-input" id="user-password" value="HauHub@2024" readonly>
                            <button type="button" class="copy-password" id="copy-password">
                                <span class="material-symbols-outlined">content_copy</span>
                            </button>
                        </div>
                        <small class="form-hint">Người dùng sẽ được yêu cầu đổi mật khẩu lần đầu đăng nhập</small>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Trạng thái *</label>
                        <select class="form-select" id="user-status" required>
                            <option value="active">Hoạt động</option>
                            <option value="pending">Chờ phê duyệt</option>
                            <option value="locked">Tạm khóa</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Ghi chú</label>
                    <textarea class="form-textarea" id="user-notes" rows="2"></textarea>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn-secondary" id="cancel-form">Hủy</button>
                    <button type="submit" class="btn-primary">Tạo tài khoản</button>
                </div>
            </form>
        </div>
    </div>

    <!-- User Detail Modal -->
    <div class="modal" id="user-detail-modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3 class="modal-title">Chi tiết Người dùng</h3>
                <button class="modal-close" id="close-detail-modal">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="modal-body" id="user-detail-content">
                <!-- User details will be loaded here -->
            </div>
        </div>
    </div>

    <!-- JavaScript Files -->
    <script type="module" src="../../js/components/sidebar.js"></script>
    <script type="module" src="../../js/components/modal.js"></script>
    <script type="module" src="../../js/components/notification.js"></script>
    <script type="module" src="../../js/services/admin-service.js"></script>
    <script type="module" src="../../js/pages/user-management.js"></script>
</body>
</html>