<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đăng ký Học phần | HauHub</title>
    
    <!-- CSS Files (Giữ nguyên) -->
    <link rel="stylesheet" href="../../css/reset.css">
    <link rel="stylesheet" href="../../css/variables.css">
    <link rel="stylesheet" href="../../css/components.css">
    <link rel="stylesheet" href="../../css/layout.css">
    <link rel="stylesheet" href="../../css/pages/course-registration.css">
    
    <!-- Google Fonts & Icons (Giữ nguyên) -->
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS (Giữ nguyên) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#136dec",
                        "background-light": "#FAFAF5",
                        "background-dark": "#101822",
                        "navy-deep": "#0A2540",
                    },
                    fontFamily: {
                        "display": ["Lexend", "sans-serif"],
                        "sans": ["Lexend", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "1rem",
                        "lg": "2rem",
                        "xl": "3rem",
                        "full": "9999px",
                    },
                },
            },
        }
    </script>
    <style>
        body {
            background-image: radial-gradient(#d1d5db 0.5px, transparent 0.5px);
            background-size: 24px 24px;
        }
        .drafting-line {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.05;
            background-image: 
                linear-gradient(45deg, #136dec 0.5px, transparent 0.5px),
                linear-gradient(-45deg, #136dec 0.5px, transparent 0.5px);
            background-size: 100px 100px;
            z-index: -1;
        }
    </style>
    
    <!-- Favicon (Thêm như trang home) -->
    <link rel="icon" type="image/x-icon" href="../../assets/images/favicon.ico">
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-navy-deep min-h-screen relative overflow-x-hidden">
    <div class="drafting-line"></div>
    
    <!-- Header sẽ được inject bởi JS (Thay thế header cũ) -->
    <header></header>
    
    <!-- Main Content (Giữ nguyên) -->
    <main class="main-content">
        <div id="page-content">
            <div class="container mx-auto px-6 lg:px-12 py-8 max-w-[1440px]">
                <!-- Page Header (Giữ nguyên) -->
                <section class="page-header mb-10">
                    <div class="header-content">
                        <div class="header-main">
                            <p class="header-subtitle">Cổng thông tin sinh viên</p>
                            <h1 class="header-title">Đăng Ký Học Phần</h1>
                            <p class="header-description">Học kỳ I • Năm học 2023-2024</p>
                        </div>
                        <div class="header-stats">
                            <div class="stat-badge" id="credits-badge">
                                <span class="material-symbols-outlined">credit_card</span>
                                <span id="credits-count">18</span>
                                <span>Tín chỉ</span>
                            </div>
                            <div class="stat-badge" id="courses-badge">
                                <span class="material-symbols-outlined">check_circle</span>
                                <span id="courses-count">05</span>
                                <span>Môn đã chọn</span>
                            </div>
                            <div class="stat-badge payment" id="payment-badge">
                                <span class="material-symbols-outlined">payments</span>
                                <span id="payment-status">Học phí: Đã đóng</span>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Filter Tabs (Giữ nguyên) -->
                <section class="filter-tabs mb-8">
                    <div class="tabs-container" id="tabs-container">
                        <!-- Tabs will be generated by JS -->
                    </div>
                </section>
                
                <!-- Main Content Area (Giữ nguyên) -->
                <div class="registration-layout">
                    <!-- Left Column: Course List (Giữ nguyên) -->
                    <div class="course-list-section">
                        <!-- Search Bar (Giữ nguyên) -->
                        <div class="search-section mb-6">
                            <div class="search-container">
                                <span class="material-symbols-outlined search-icon">search</span>
                                <input type="text" 
                                       id="course-search-input" 
                                       class="search-input"
                                       placeholder="Tìm mã học phần, tên môn học...">
                                <button id="advanced-filter-btn" class="filter-button">
                                    <span class="material-symbols-outlined">tune</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Courses List (Giữ nguyên) -->
                        <div id="courses-list" class="courses-list">
                            <!-- Courses will be loaded by JS -->
                            <div class="loading-indicator">
                                <span class="material-symbols-outlined animate-spin">refresh</span>
                                <p>Đang tải danh sách học phần...</p>
                            </div>
                        </div>
                        
                        <!-- Empty State (Giữ nguyên) -->
                        <div id="empty-state" class="empty-state" style="display: none;">
                            <span class="material-symbols-outlined">straighten</span>
                            <p>Dùng bộ lọc để tìm kiếm thêm học phần Studio</p>
                        </div>
                        
                        <!-- Pagination (Giữ nguyên) -->
                        <div class="pagination-section">
                            <button id="load-more-btn" class="load-more-btn">
                                Xem thêm học phần
                            </button>
                        </div>
                    </div>
                    
                    <!-- Right Column: Registration Summary (Giữ nguyên) -->
                    <div class="summary-section">
                        <!-- Selected Courses (Giữ nguyên) -->
                        <div class="summary-card">
                            <div class="summary-header">
                                <h3 class="summary-title">Học phần đã chọn</h3>
                                <span class="counter-badge" id="selected-count">5</span>
                            </div>
                            
                            <div id="selected-courses-list" class="selected-courses-list">
                                <!-- Selected courses will be loaded by JS -->
                            </div>
                            
                            <div class="summary-footer">
                                <div class="total-section">
                                    <p class="total-label">Tạm tính học phí</p>
                                    <p class="total-amount" id="total-fee">5.420.000đ</p>
                                </div>
                                
                                <button id="confirm-registration-btn" class="confirm-btn">
                                    Xác nhận Đăng ký
                                </button>
                                
                                <p class="confirmation-note">
                                    Bằng cách nhấn xác nhận, bạn đồng ý với kế hoạch học tập đã chọn cho học kỳ này.
                                </p>
                            </div>
                        </div>
                        
                        <!-- Help Widget (Giữ nguyên) -->
                        <div class="help-widget">
                            <div class="help-content">
                                <h4 class="help-title">Cần trợ giúp?</h4>
                                <p class="help-description">
                                    Xem video hướng dẫn đăng ký hoặc liên hệ phòng đào tạo.
                                </p>
                                <button id="help-video-btn" class="help-button">
                                    <span class="material-symbols-outlined">play_circle</span>
                                    Hướng dẫn video
                                </button>
                            </div>
                            <span class="help-decoration material-symbols-outlined">help</span>
                        </div>
                        
                        <!-- Schedule Preview (Giữ nguyên) -->
                        <div class="schedule-preview-card">
                            <h4 class="preview-title">Xem trước lịch học</h4>
                            <div id="schedule-preview" class="schedule-preview">
                                <!-- Schedule preview will be loaded by JS -->
                            </div>
                            <button id="view-schedule-btn" class="view-schedule-btn">
                                <span class="material-symbols-outlined">calendar_month</span>
                                Xem lịch học đầy đủ
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Registration Rules (Giữ nguyên) -->
                <section class="rules-section mt-12">
                    <h3 class="rules-title">Quy định đăng ký học phần</h3>
                    <div class="rules-grid">
                        <div class="rule-item">
                            <span class="material-symbols-outlined rule-icon">warning</span>
                            <h4>Số tín chỉ tối thiểu</h4>
                            <p>Phải đăng ký tối thiểu 12 tín chỉ mỗi học kỳ</p>
                        </div>
                        <div class="rule-item">
                            <span class="material-symbols-outlined rule-icon">schedule</span>
                            <h4>Thời hạn đăng ký</h4>
                            <p>Đăng ký trong vòng 2 tuần đầu của học kỳ</p>
                        </div>
                        <div class="rule-item">
                            <span class="material-symbols-outlined rule-icon">block</span>
                            <h4>Trùng lịch học</h4>
                            <p>Không được đăng ký các môn học trùng lịch</p>
                        </div>
                        <div class="rule-item">
                            <span class="material-symbols-outlined rule-icon">school</span>
                            <h4>Môn tiên quyết</h4>
                            <p>Phải hoàn thành môn tiên quyết trước khi đăng ký</p>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>
    
    <!-- Footer sẽ được inject bởi JS (Thay thế footer cũ) -->
    <footer></footer>
    
    <!-- THÊM: AI Chat Widget Container (như trang home) -->
    <div id="ai-chat-widget"></div>
    
    <!-- Course Detail Modal (Giữ nguyên) -->
    <div id="course-detail-modal" class="modal" style="display: none;">
        <div class="modal-content large-modal">
            <h3 class="modal-title" id="modal-course-name">Đồ án Kiến trúc Dân dụng 1</h3>
            <div class="modal-body">
                <div class="course-detail-grid">
                    <div class="course-info-section">
                        <div class="course-badges">
                            <span class="course-code">Mã: ARC302</span>
                            <span class="course-credits">5 Tín chỉ</span>
                            <span class="course-type">Bắt buộc</span>
                        </div>
                        
                        <div class="course-description">
                            <p>Môn học trang bị kiến thức cơ bản về thiết kế kiến trúc dân dụng, tập trung vào các nguyên lý thiết kế, công năng sử dụng và thẩm mỹ kiến trúc.</p>
                        </div>
                        
                        <div class="course-details">
                            <div class="detail-item">
                                <span class="detail-label">Giảng viên:</span>
                                <span class="detail-value" id="detail-instructor">TS. Nguyễn Văn A</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Lịch học:</span>
                                <span class="detail-value" id="detail-schedule">Thứ 3, 5 (Tiết 1-4)</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Phòng học:</span>
                                <span class="detail-value" id="detail-room">P.402 - H1</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Sĩ số:</span>
                                <span class="detail-value" id="detail-capacity">45/50</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Điều kiện tiên quyết:</span>
                                <span class="detail-value" id="detail-prerequisites">ARC201, ARC202</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="course-actions-section">
                        <div class="capacity-section">
                            <div class="capacity-header">
                                <span>Sĩ số lớp</span>
                                <span id="modal-capacity">45/50</span>
                            </div>
                            <div class="capacity-bar">
                                <div class="capacity-fill" id="modal-capacity-fill" style="width: 90%"></div>
                            </div>
                            <p class="capacity-note" id="modal-capacity-note">Còn 5 chỗ trống</p>
                        </div>
                        
                        <div class="action-buttons">
                            <button id="modal-register-btn" class="btn-primary">
                                <span class="material-symbols-outlined">add_circle</span>
                                Thêm vào đăng ký
                            </button>
                            <button class="btn-outline" id="modal-schedule-btn">
                                <span class="material-symbols-outlined">calendar_month</span>
                                Xem lịch học
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn-cancel">Đóng</button>
            </div>
        </div>
    </div>
    
    <!-- Confirm Registration Modal (Giữ nguyên) -->
    <div id="confirm-registration-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3 class="modal-title">Xác nhận đăng ký học phần</h3>
            <div class="modal-body">
                <div class="confirmation-summary">
                    <div class="summary-item">
                        <span class="summary-label">Số môn đăng ký:</span>
                        <span class="summary-value" id="confirm-courses-count">5 môn</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Tổng tín chỉ:</span>
                        <span class="summary-value" id="confirm-credits-count">18 tín chỉ</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Học phí tạm tính:</span>
                        <span class="summary-value" id="confirm-total-fee">5.420.000đ</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Học kỳ:</span>
                        <span class="summary-value">HK1 2023-2024</span>
                    </div>
                </div>
                
                <div class="confirmation-checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="confirm-rules" required>
                        <label for="confirm-rules">
                            Tôi đã đọc và đồng ý với quy định đăng ký học phần
                        </label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="confirm-schedule-check" required>
                        <label for="confirm-schedule-check">
                            Tôi đã kiểm tra và xác nhận không có môn học trùng lịch
                        </label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="confirm-prerequisites" required>
                        <label for="confirm-prerequisites">
                            Tôi đã hoàn thành tất cả môn học tiên quyết
                        </label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="confirm-payment" required>
                        <label for="confirm-payment">
                            Tôi cam kết thanh toán học phí đúng hạn
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn-cancel">Hủy</button>
                <button id="final-confirm-btn" class="btn-primary">Xác nhận đăng ký</button>
            </div>
        </div>
    </div>
    
    <!-- Help Video Modal (Giữ nguyên) -->
    <div id="help-video-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3 class="modal-title">Hướng dẫn đăng ký học phần</h3>
            <div class="modal-body">
                <div class="video-placeholder">
                    <div class="video-thumbnail">
                        <span class="material-symbols-outlined">play_circle</span>
                        <p>Video hướng dẫn đăng ký học phần</p>
                    </div>
                </div>
                <div class="help-links">
                    <a href="#" class="help-link">
                        <span class="material-symbols-outlined">description</span>
                        Tài liệu hướng dẫn chi tiết (PDF)
                    </a>
                    <a href="#" class="help-link">
                        <span class="material-symbols-outlined">forum</span>
                        Câu hỏi thường gặp (FAQ)
                    </a>
                    <a href="#" class="help-link">
                        <span class="material-symbols-outlined">support_agent</span>
                        Liên hệ phòng đào tạo
                    </a>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn-cancel">Đóng</button>
            </div>
        </div>
    </div>
    
    <!-- JavaScript (Kết hợp cũ và mới) -->
    <script type="module">
        // Import các component mới (như trang home)
        import { Header } from '../../js/components/header.js';
        import { Footer } from '../../js/components/footer.js';
        import { AIChatWidget } from '../../js/components/chat-widget.js';
        
        document.addEventListener('DOMContentLoaded', () => {
            // Inject Header, Footer, Chat Widget (như trang home)
            new Header();
            new Footer();
            new AIChatWidget();
            
            // Khởi tạo JS cũ của course registration (giữ nguyên chức năng)
            initializeCourseRegistration();
        });
        
        // Giữ nguyên hàm initializeCourseRegistration cũ (hoặc giữ script cũ)
        function initializeCourseRegistration() {
            // Course detail modal
            const courseDetailModal = document.getElementById('course-detail-modal');
            const closeCourseModalBtn = courseDetailModal?.querySelector('.btn-cancel');
            
            if (closeCourseModalBtn) {
                closeCourseModalBtn.addEventListener('click', () => {
                    courseDetailModal.style.display = 'none';
                });
            }
            
            // Confirm registration modal
            const confirmRegistrationModal = document.getElementById('confirm-registration-modal');
            const confirmRegistrationBtn = document.getElementById('confirm-registration-btn');
            const closeConfirmModalBtn = confirmRegistrationModal?.querySelector('.btn-cancel');
            
            if (confirmRegistrationBtn && confirmRegistrationModal) {
                confirmRegistrationBtn.addEventListener('click', () => {
                    confirmRegistrationModal.style.display = 'block';
                });
            }
            
            if (closeConfirmModalBtn) {
                closeConfirmModalBtn.addEventListener('click', () => {
                    confirmRegistrationModal.style.display = 'none';
                });
            }
            
            // Final confirmation button
            const finalConfirmBtn = document.getElementById('final-confirm-btn');
            if (finalConfirmBtn) {
                finalConfirmBtn.addEventListener('click', () => {
                    const checkboxes = [
                        document.getElementById('confirm-rules'),
                        document.getElementById('confirm-schedule-check'),
                        document.getElementById('confirm-prerequisites'),
                        document.getElementById('confirm-payment')
                    ];
                    
                    const allChecked = checkboxes.every(checkbox => checkbox.checked);
                    
                    if (allChecked) {
                        alert('Đăng ký học phần thành công!');
                        confirmRegistrationModal.style.display = 'none';
                    } else {
                        alert('Vui lòng xác nhận tất cả các điều khoản trước khi đăng ký');
                    }
                });
            }
            
            // Help video modal
            const helpVideoModal = document.getElementById('help-video-modal');
            const helpVideoBtn = document.getElementById('help-video-btn');
            const closeHelpModalBtn = helpVideoModal?.querySelector('.btn-cancel');
            
            if (helpVideoBtn && helpVideoModal) {
                helpVideoBtn.addEventListener('click', () => {
                    helpVideoModal.style.display = 'block';
                });
            }
            
            if (closeHelpModalBtn) {
                closeHelpModalBtn.addEventListener('click', () => {
                    helpVideoModal.style.display = 'none';
                });
            }
            
            // Search functionality
            const searchInput = document.getElementById('course-search-input');
            const searchIcon = document.querySelector('.search-icon');
            
            function performSearch() {
                const query = searchInput?.value.trim();
                if (query) {
                    alert(`Tìm kiếm học phần: ${query}`);
                }
            }
            
            if (searchIcon) {
                searchIcon.addEventListener('click', performSearch);
            }
            
            if (searchInput) {
                searchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        performSearch();
                    }
                });
            }
            
            // Advanced filter button
            const advancedFilterBtn = document.getElementById('advanced-filter-btn');
            if (advancedFilterBtn) {
                advancedFilterBtn.addEventListener('click', () => {
                    alert('Mở bộ lọc nâng cao');
                });
            }
            
            // Load more button
            const loadMoreBtn = document.getElementById('load-more-btn');
            if (loadMoreBtn) {
                loadMoreBtn.addEventListener('click', () => {
                    alert('Tải thêm học phần');
                });
            }
            
            // View schedule button
            const viewScheduleBtn = document.getElementById('view-schedule-btn');
            if (viewScheduleBtn) {
                viewScheduleBtn.addEventListener('click', () => {
                    alert('Xem lịch học đầy đủ');
                });
            }
            
            // Demo courses
            const coursesList = document.getElementById('courses-list');
            const selectedCoursesList = document.getElementById('selected-courses-list');
            
            if (coursesList) {
                const courses = [
                    { 
                        code: 'ARC302', 
                        name: 'Đồ án Kiến trúc Dân dụng 1', 
                        credits: 5,
                        instructor: 'TS. Nguyễn Văn A',
                        schedule: 'Thứ 3, 5 (Tiết 1-4)',
                        capacity: '45/50',
                        type: 'Bắt buộc'
                    },
                    { 
                        code: 'QH402', 
                        name: 'Quy hoạch Đô thị', 
                        credits: 4,
                        instructor: 'ThS. Trần Thị B',
                        schedule: 'Thứ 2, 4 (Tiết 5-8)',
                        capacity: '40/45',
                        type: 'Bắt buộc'
                    },
                    { 
                        code: 'XD201', 
                        name: 'Kết cấu Thép', 
                        credits: 3,
                        instructor: 'TS. Lê Văn C',
                        schedule: 'Thứ 6 (Tiết 1-4)',
                        capacity: '50/55',
                        type: 'Bắt buộc'
                    },
                    { 
                        code: 'NT301', 
                        name: 'Nội thất Căn hộ', 
                        credits: 2,
                        instructor: 'ThS. Phạm Thị D',
                        schedule: 'Thứ 3 (Tiết 5-8)',
                        capacity: '30/35',
                        type: 'Tự chọn'
                    }
                ];
                
                // Remove loading indicator
                const loadingIndicator = coursesList.querySelector('.loading-indicator');
                if (loadingIndicator) {
                    loadingIndicator.remove();
                }
                
                courses.forEach(course => {
                    const courseCard = document.createElement('div');
                    courseCard.className = 'course-card';
                    courseCard.innerHTML = `
                        <div class="course-header">
                            <span class="course-code">${course.code}</span>
                            <span class="course-credits">${course.credits} TC</span>
                        </div>
                        <h3 class="course-name">${course.name}</h3>
                        <div class="course-meta">
                            <div class="meta-item">
                                <span class="material-symbols-outlined">person</span>
                                <span>${course.instructor}</span>
                            </div>
                            <div class="meta-item">
                                <span class="material-symbols-outlined">schedule</span>
                                <span>${course.schedule}</span>
                            </div>
                        </div>
                        <div class="course-footer">
                            <span class="course-capacity">${course.capacity}</span>
                            <button class="course-action-btn">
                                <span class="material-symbols-outlined">add_circle</span>
                                Thêm
                            </button>
                        </div>
                    `;
                    
                    // Action button
                    const actionBtn = courseCard.querySelector('.course-action-btn');
                    actionBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        
                        // Add to selected courses
                        const selectedCourseItem = document.createElement('div');
                        selectedCourseItem.className = 'selected-course-item';
                        selectedCourseItem.innerHTML = `
                            <div class="selected-course-header">
                                <span class="selected-course-code">${course.code}</span>
                                <button class="remove-btn">
                                    <span class="material-symbols-outlined">close</span>
                                </button>
                            </div>
                            <p class="selected-course-name">${course.name}</p>
                            <div class="selected-course-meta">
                                <span class="meta-item">${course.credits} TC</span>
                                <span class="meta-item">${course.schedule}</span>
                            </div>
                        `;
                        
                        if (selectedCoursesList) {
                            selectedCoursesList.appendChild(selectedCourseItem);
                            
                            // Update counters
                            const coursesCount = document.getElementById('courses-count');
                            const creditsCount = document.getElementById('credits-count');
                            const selectedCount = document.getElementById('selected-count');
                            
                            if (coursesCount && creditsCount && selectedCount) {
                                const currentCourses = parseInt(coursesCount.textContent);
                                const currentCredits = parseInt(creditsCount.textContent);
                                
                                coursesCount.textContent = currentCourses + 1;
                                creditsCount.textContent = currentCredits + course.credits;
                                selectedCount.textContent = currentCourses + 1;
                            }
                        }
                    });
                    
                    // Card click for details
                    courseCard.addEventListener('click', () => {
                        // Set modal content
                        document.getElementById('modal-course-name').textContent = course.name;
                        document.getElementById('detail-instructor').textContent = course.instructor;
                        document.getElementById('detail-schedule').textContent = course.schedule;
                        document.getElementById('detail-capacity').textContent = course.capacity;
                        document.getElementById('modal-capacity').textContent = course.capacity;
                        
                        // Show modal
                        courseDetailModal.style.display = 'block';
                    });
                    
                    coursesList.appendChild(courseCard);
                });
            }
            
            // Modal register button
            const modalRegisterBtn = document.getElementById('modal-register-btn');
            if (modalRegisterBtn) {
                modalRegisterBtn.addEventListener('click', () => {
                    alert('Đã thêm học phần vào danh sách đăng ký');
                    courseDetailModal.style.display = 'none';
                });
            }
            
            // Modal schedule button
            const modalScheduleBtn = document.getElementById('modal-schedule-btn');
            if (modalScheduleBtn) {
                modalScheduleBtn.addEventListener('click', () => {
                    alert('Xem lịch học chi tiết');
                });
            }
            
            // Close modals when clicking outside
            window.addEventListener('click', (e) => {
                if (courseDetailModal && e.target === courseDetailModal) {
                    courseDetailModal.style.display = 'none';
                }
                if (confirmRegistrationModal && e.target === confirmRegistrationModal) {
                    confirmRegistrationModal.style.display = 'none';
                }
                if (helpVideoModal && e.target === helpVideoModal) {
                    helpVideoModal.style.display = 'none';
                }
            });
        }
    </script>
    
    <!-- Giữ các script cũ nếu cần (đảm bảo không bị mất chức năng) -->
    <script src="../../js/config/api-config.js"></script>
    <script src="../../js/config/constants.js"></script>
    <script src="../../js/utils/auth.js"></script>
    <script src="../../js/utils/date-format.js"></script>
    <script src="../../js/components/modal.js"></script>
    <script src="../../js/components/notification.js"></script>
    <script src="../../js/services/course-service.js"></script>
    <script src="../../js/pages/course-registration.js" type="module"></script>
</body>
</html>